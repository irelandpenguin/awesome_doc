<HTML>
<HEAD>
<META http-equiv="content-type" content="text/html; charset=gb2312">
<META name="man2html Chinese version">
<TITLE>FSEEK</TITLE>
</HEAD>
<BODY>
<H1>FSEEK</H1>
Section: Linux Programmer's Manual (3)<BR>Updated: 1993-11-29<BR>Index</A>

<H2>NAME</H2>

fgetpos, fseek, fsetpos, ftell, rewind - 重定位某个流

<H2>总览 (SYNOPSIS)</H2>

<B>#include &lt;stdio.h</A>&gt;</B>

<P>
<B>int fseek(FILE *</B><I>stream</I><B>, long </B><I>offset</I><B>, int </B><I>whence</I><B>);</B>

<BR>

<B>long ftell(FILE *</B><I>stream</I><B>);</B>

<BR>

<B>void rewind(FILE *</B><I>stream</I><B>);</B>

<BR>

<B>int fgetpos(FILE *</B><I>stream</I><B>, fpos_t *</B><I>pos</I><B>);</B>

<BR>

<B>int fsetpos(FILE *</B><I>stream</I><B>, fpos_t *</B><I>pos</I><B>);</B>


<H2>描述 (DESCRIPTION)</H2>

函数
<B>fseek</B>

设置
<I>stream</I>

流 的 文件位置 标志. 新的 文件位置 (以 字节 为 单位) 根据
<I>whence</I>

指定的 文件位置 加上
<I>offset</I>

获得. 如果
<I>whence</I>

设置为
<B>SEEK_SET</B>,

<B>SEEK_CUR</B>,

或
<B>SEEK_END</B>,

则 对应的 文件位置 分别是 文件开始, 当前位置, 或 文件末尾. 成功 调用
<B>fseek</B>

后, 函数 清除 流 的 文件末尾 标志(end-of-file), 同时 消除
<B>ungetc</A></B>(3)

函数 对 流 的 影响.
<P>

<B>ftell</B>

函数 能够 获取
<I>stream</I>

流 的 当前 文件位置.
<P>

<B>rewind</B>

函数 把
<I>stream</I>

流 的 文件位置 设置到 文件开始处. 它 等效于:
<P>

<DL COMPACT><DT><DD>
(void)fseek(stream, 0L, SEEK_SET)
</DL>

<P>

另外 它 还能 清除 流 的 错误标志 (见
<B>clearerr</A></B>(3)).

<P>

<B>fgetpos</B>

和
<B>fsetpos</B>

函数 相当于
<B>ftell</B>

和
<B>fseek</B>

(whence 设置 为
<B>SEEK_SET</B>)

的 另一种 写法, 读取 当前 文件位置 并 保存在
<I>pos</I>

中, 或用
<I>pos</I>

指向的值 设置 当前 文件位置. 在 某些 非UNIX系统 中,
<B>fpos_t</B>

可以 是 一种 复杂的 (数据)对象, 因而 这两个函数 大概是 唯一 可移植的 
流定位函数.
<P>

<H2>返回值 (RETURN VALUE)</H2>

<B>rewind</B>

函数 没有 返回值. 如果 操作 成功,
<B>fgetpos</B>,

<B>fseek</B>,

<B>fsetpos</B>

返回 0, 而
<B>ftell</B>

返回 当前 偏移 (当前 文件位置), 否则 返回 -1, 并 设置 全局变量 errno,
指出 错误 类型.
<P>

<H2>错误 (ERRORS)</H2>

<DL COMPACT>
<DT><B>EBADF</B>

<DD>
<I>stream</I>

流 不是 可重定位的 流 (non-seekable stream).
<DT><B>EINVAL</B>

<DD>
<B>fseek</B>

的
<I>whence</I>

参数 不是
<B>SEEK_SET</B>,

<B>SEEK_END</B>,

或
<B>SEEK_CUR</B>.

</DL>
<P>

<B>fgetpos</B>,

<B>fseek</B>,

<B>fsetpos</B>,

和 
<B>ftell</B>

函数 也可能 失败后, 把
<I>errno</I>

设置为
<B>fflush</A></B>(3),

<B>fstat</A></B>(2),

<B>lseek</A></B>(2),

和
<B>malloc</A></B>(3)

的 错误 类型.

<H2>遵循 (CONFORMING TO)</H2>

<B>fgetpos</B>,

<B>fsetpos</B>,

<B>fseek</B>,

<B>ftell</B>,

和
<B>rewind</B>

函数 遵循 ANSI X3.159-1989 (``ANSI C'') 标准.

<H2>另见 (SEE ALSO)</H2>

<B>lseek</A></B>(2),

<B>fseeko</A></B>(3)


<H2>[中文版维护人]</H2>

徐明 Email: xuming@users.sourceforge.net</A>

<H2>[中文版最新更新]</H2>

<B>2004/08/20</B>

第一版

<H2>《中国Linux论坛man手册页翻译计划》</H2>

http://cmpp.linuxforum.net</A>
<P>
<P>

<HR>
<H2>Index</H2>
<DL>
<DT>NAME</A><DD>
<DT>总览 (SYNOPSIS)</A><DD>
<DT>描述 (DESCRIPTION)</A><DD>
<DT>返回值 (RETURN VALUE)</A><DD>
<DT>错误 (ERRORS)</A><DD>
<DT>遵循 (CONFORMING TO)</A><DD>
<DT>另见 (SEE ALSO)</A><DD>
<DT>[中文版维护人]</A><DD>
<DT>[中文版最新更新]</A><DD>
<DT>《中国Linux论坛man手册页翻译计划》</A><DD>
</DL>
<HR>
This document was created by
man2html</A>,
using the manual pages.<BR>
Time: 01:46:58 GMT, August 26, 2004
</BODY>
</HTML>
