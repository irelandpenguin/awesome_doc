<HEAD><TITLE>鸟哥的 Linux 私房菜 -- OpenWebMail</TITLE>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META content=VBird name=Author>
<META content="OpenWebMail是很棒的一套 web 介面的 mail 服掌鳎≡用看看！" name=Description>
<META content="Mozilla/4.51 [zh-tw] (WinNT; U) [Netscape]" name=GENERATOR><!-- saved from url=(0022)http://internet.e-mail -->
<STYLE>
   <!--
   body{background-image=url("70_files/VBirdLinux[1].jpg");background-ATTACHMENT=FIXED}
td { font-family: Verdana, Arial, Helvetica, sans-serif }
.bodyline	{ background-color: #FFFFFF; border: 1px #98AAB1 solid; }

.forumline	{ background-color: #FFFFFF; border: 2px #006699 solid; }

td.row1	{ background-color: #EFEFEF; }
.postbody { font-size : 12px; line-height: 18px}
   -->
</STYLE>
</head>
<BODY background="70_files/VBirdLinux[16].jpg" nosave="">
<CENTER>
<CENTER><B><FONT color=#3333ff size=+2><FONT face=SimSun>鸟哥的</FONT><FONT face="Times New Roman,Times"> Linux </FONT><FONT face=SimSun>与</FONT><FONT face="Times New Roman,Times"> ADSL </FONT><FONT face=SimSun>私房菜</FONT></FONT></B> <BR><A href="http://linux.vbird.org/" target=_top><IMG height=25 src="61_files/VBirdTitle2[10].jpg" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_basic"><IMG height=25 src="39_files/icon_system[3].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_server"><IMG height=25 src="55_files/icon_server[13].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_security"><IMG height=25 src="71_files/icon_security[10].jpg" width=90 border=0 nosave=""></A> <A href="http://phorum.vbird.org/" target=_blank><IMG height=25 src="60_files/icon_forums[10].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/adsl"><IMG height=25 src="50_files/icon_adsl[13].gif" width=90 border=0 nosave=""></A> <BR>
<HR width="100%">
</CENTER><FONT color=#3333ff size=+2><A href="http://linux.vbird.org/linux_server/0520openwebmail.php" target=_self><FONT face=SimSun>简易</FONT><FONT face="Times New Roman,Times">OpenWebMail </FONT><FONT face=SimSun>设定</FONT></A></FONT></CENTER>
<DIV align=right><FONT face=SimSun color=#3333ff size=-1>最近更新日期：2004/08/26</FONT></DIV><FONT color=#000099 size=-2>　</FONT> 
<TABLE cols=1 width="100%" bgColor=#ffcccc border=1>
<TBODY>
<TR>
<TD><FONT color=#000099 size=-1>在 Client 端使用 pop3 之类的 <A href="http://linux.vbird.org/linux_server/0380sendmail.php#theory_mailtrans">MUA</A> 软件来收信是目前一般使用者最常见的信件收受模式。不过，这种模式由于是直接将信件下载到客户端的个人计算机上，事实上，很容易遭受不明病毒的影响，并且，如果信件内容大部分是广告信件的话，由主机传送到个人计算机这过程中的传送行为，将会平白的让使用者损失一定程度的网络频宽。由于电子邮件对于现代人来说，应该已经是不可或缺的使用工具，所以虽然使用 pop3 有一定程度的风险，大家还是得继续使用啊~难道没有解决的方法吗？呵呵！是有的，那就是使用网页接口 (Web) 的邮件功能啦，也就是 WebMail 。其实 <B>WebMail 并不是一个邮件服务器</B>，而只是透过主机提供的 Web 接口让使用者登入，并且直接在主机上面进行邮件的收发而已。因此，事实上，您也可以将 webmail 视为一个 MUA 啦！底下我们就来说一说这一个由台湾人发明的 OpenWebMail 吧！</FONT></TD></TR></TBODY></TABLE><FONT color=#000099 size=-2>　</FONT> <BR><FONT color=#000099 size=+1><A href="#theory">前言</A>：</FONT> <BR><FONT color=#000099>　　：<A href="#theory_need">架设前须知</A></FONT> <BR><FONT color=#000099 size=+1><A href="#install">OpenWebMail 的安装</A>：</FONT> <BR><FONT color=#000099>　　：<A href="#install_fc1">FC1 的 RPM 安装</A></FONT> <BR><FONT color=#000099>　　：<A href="#install_mdk10">MDK 10.0 的 tarball 安装</A></FONT> <BR><FONT color=#000099 size=+1><A href="#others">一些其它的设定</A>：</FONT> <BR><FONT color=#000099 size=+1><A href="#faq">问题与解决</A>：</FONT> <BR><FONT color=#000099>　　：还是无法执行 openwebmail</FONT> <BR><FONT color=#000099 size=+1><A href="#reference">参考资源</A>：</FONT> <BR>
<HR width="100%">
<A name=theory></A><IMG height=34 alt="" src="33_files/penguin-m[1].gif" width=25 align=middle nosave=""><FONT color=#000099 size=+1>前言：</FONT> 
<UL>电子邮件对于一般人来说，是越来越重要了，像鸟哥通常就是使用电子邮件来跟大部分的朋友联络，而且，重要的文件与公事也几乎是使用电子邮件来传递的呢！而在一般的个人计算机上面，我们通常是使用类似 Outlook express/Netscape/Mozilla 之类的 Client 端软件，并透过 POP3/SMTP 协定来收发信件。 <BR>　 <BR>不过，遗憾的是，电子邮件其实并不安全！这点在一些<A href="http://www.cert.org.tw/" target=_blank>安全通报</A>上面就可以查阅的到了，不论是 <A href="http://linux.vbird.org/linux_server/0380sendmail.php#theory_mailtrans">MTA/MUA</A> 都可能有漏洞的！而且，除了漏洞问题之外，更麻烦的是，广告信件的大量发行，造成我们客户端的频宽浪费，真的是很讨厌！但是，电子邮件又是这样的重要，不能不收发电子邮件啊！那怎么办？这个时候我们就可以使用 Web 接口的 MUA 来进行电子邮件的收发啊！ <BR>　 <BR>那么这种 webmail 的地位是甚么呢？是否只要有 webmail 就不需要 mail server 了呢？当然不是这样！<B><FONT color=#000066>webmail 其实可以被当成是一种 MUA 来看待</FONT></B>，也就是说，您可以将他想成与 outlook express 同等级的应用软件；而透过这个 webmail 我们可以对 mail serve r进行电子邮件的存取。也就是说， webmail 要能够使用，必须要架构在具有 WWW 及 Mail Server 的服务上面才行！这几者之间的关系可以简单的这样看： 
<P><FONT face=SimSun color=#000099>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Server 端&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Client</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp;&nbsp; -------------------------</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Apache/Webmail&lt;---|&lt;----&nbsp; Mozilla/IE(浏览器)</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp; |&lt;---SMTP-----|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp; |&nbsp; /var/spool/mail/accout |</FONT> <BR><FONT face=SimSun color=#000099>&nbsp;&nbsp; `-------------------------'</FONT> </P>
<P>也就是说，当 Client 端以浏览器登入主机后，主机透过 webmail 提供的服务，让登入的使用者可以读取该主机内自己的邮件，并且，也可以透过主机的 smtp 协议来进行邮件的寄发！ <BR>　 <BR></P>
<HR width="100%">
<A name=theory_need></A><IMG height=23 src="70_files/penguin-s[2].gif" width=17 align=middle nosave=""><FONT color=#000099>架设前须知</FONT> <BR>　 
<UL>如同前面的说明，webmail 要能够正确的运作，其实还需要 www/mail 这两种服务的存在才行！此外，由于 webmail 需要能够正确的存取主机内的邮件档案 (/var/spool/mail/account)，所以，我们必须要提供 webmail 足够的权力来存取才行。因此，您必需要确定： <BR>　 
<UL>
<LI><FONT color=#000066>WWW Server (Apache) 已经顺利运作；</FONT> 
<LI><FONT color=#000066>Mail Server (Postfix/sendmail) 已经顺利运作；</FONT> 
<LI><FONT color=#000066>webmail 要求的前置软件必须已经安装：例如 openwebmail 需要 perl/suidperl/perl(CGI)/perl-Text-Iconv/perl-Compress-Zlib 等等的套件呢！其中 suid 方面的软件，则是提供 webmail 存取权力的套件。</FONT> </LI></UL>　 <BR>所以，在您架设 webmail 之前，请先确认您的主机提供的 WWW/Mail 服务是正确无误的！此外，前驱套件也必须要没有问题的安装才行！ <BR>　 <BR>底下我们以目前相当热门，并且是由台湾成大博士董仲恺主导发起的 Openwebmail 这个套件来进行安装！这东西很不错喔！您可以在底下的连结当中下载与 Red Hat/Fedora 有关的 RPM 档案： <BR>　 
<UL>
<LI><A href="http://turtle.ee.ncku.edu.tw/openwebmail/download/redhat/rpm/packages/" target=_blank>http://turtle.ee.ncku.edu.tw/openwebmail/download/redhat/rpm/packages/</A> </LI></UL>　 <BR>或者是下载源文件 (tarball)： <BR>　 
<UL>
<LI><A href="http://turtle.ee.ncku.edu.tw/openwebmail/download/release/" target=_blank>http://turtle.ee.ncku.edu.tw/openwebmail/download/release/</A> </LI></UL>　 <BR>底下鸟哥将以 FC1 及 Mandrake 10.0 作为测试的基准来安装 openwebmai 喔！</UL></UL>
<HR width="100%">
<A name=install></A><IMG height=34 alt="" src="33_files/penguin-m[1].gif" width=25 align=middle nosave=""><FONT color=#000099 size=+1>OpenWebMail 的安装：</FONT> 
<UL>因为 openwebmail 本身就有针对 Red Hat/Fedora 释出 RPM 档案，所以我们当然就直接以编译好的 RPM 档案来安装即可！那如果是非 Red Hat/Fedora 怎么办？没关系，可以使用原始码来安装啊！ <BR>　 <BR>
<HR width="100%">
<A name=install_fc1></A><IMG height=23 src="70_files/penguin-s[2].gif" width=17 align=middle nosave=""><FONT color=#000099>FC1 的 RPM 安装</FONT> <BR>　 
<UL>请先确定 Postfix 或者 sendmail 已经安装完毕，此外， Apache 也已经安装好了！如果想要快速的架设好您的 Postfix + SASL 认证的话，可以这样做：(更详细的信息请查阅：<A href="http://linux.vbird.org/linux_server/0390postfix.php">http://linux.vbird.org/linux_server/0390postfix.php</A>) <BR>　 
<TABLE id=table1 cols=1 width=550 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun color=#ffccff size=-1># 0. 先确定所有的套件都已经安装了，主要有：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 postfix-2.0.16-1</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 cyrus-sasl-2.1.15-6</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 cyrus-sasl-md5-2.1.15-6</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 cyrus-sasl-devel-2.1.15-6</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 cyrus-sasl-plain-2.1.15-6</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>　　 如果还有忘记写上去的，还请继续的安装啊！并且，请移除底下的套件</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 sendmail</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 fetchmail</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　　 mutt</FONT> 
<P><FONT face=SimSun color=#ffccff size=-1># 1. 先确定一下 /usr/lib/sasl2/smtpd.conf 存在，且内容为：&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　&nbsp;&nbsp; pwcheck_method: saslauthd&nbsp;</FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 2. 确定一下 /etc/sysconfig/saslauthd 内容为：&nbsp;</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>　&nbsp; </FONT><FONT color=#ffff00>MECH=shadow&nbsp;</FONT></FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 3. 确定一下 main.cf 里面有：&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_auth_enable = yes&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_local_domain=&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_recipient_restrictions =&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; reject_unknown_sender_domain&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; reject_unknown_recipient_domain&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; permit_mynetworks&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; permit_sasl_authenticated&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; reject_unauth_destination&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_client_restrictions =&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; permit_mynetworks&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; hash:/etc/postfix/access&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; permit_sasl_authenticated&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; reject_rbl_client relays.ordb.org&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp; reject_rhsbl_client dsn.rfc-ignorant.org&nbsp;</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_security_options = noanonymous&nbsp;</FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 4. 然后启动 saslauth 及 postfix 应该就可以啦！&nbsp;</FONT></P></TD></TR></TBODY></TABLE>　 <BR>然后，请先下载 FC1 所需要的前驱套件，请连结至：<A href="http://turtle.ee.ncku.edu.tw/openwebmail/download/redhat/rpm/packages/fc1/" target=_blank>http://turtle.ee.ncku.edu.tw/openwebmail/download/redhat/rpm/packages/fc1/</A> 下载所有的 RPM 套件，然后再安装 openwebmail 2.40 版，整个安装流程： <BR>　 
<TABLE cols=1 width=550 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun color=#cccccc size=-1>1. 安装 openwebmail ：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>rpm -ivh perl* </FONT></B><FONT color=#ffccff># 假设所有的RPM都放在 /root 底下。</FONT></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>yum update</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 这个动作仅只是要升级刚刚的套件而已；</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>　</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>rpm -ivh openwebmail-2.40-1.i386.rpm</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 注意：在预设的情况下， openwebmail 会将档案资料安装至与 apache 有关的路径</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 也就是 /var/www/data 与 /var/www/cgi-bin 底下，所以，如果您已经将 apache</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 以 tarball 方式安装，导致拥有不同的 WWW Root 路径时，最好使用 tarball</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 来安装您的 openwebmail 啊！</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun color=#cccccc size=-1>2. 初始化设定：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>cd /var/www/cgi-bin/openwebmail</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>./openwebmail-tool.pl --init</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 因为 openwebmail 支持相当多种认证机制，因此，我们必须在使用 opewebmail&nbsp;</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 之前，先将 openwebmail 的相关设定做好！上面 openwebmail-tool.pl --init</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 就是在达成这样的目标。此外，这个步骤会进行蛮长的一段时间喔！请耐心等候！</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>cd etc</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test etc]# </FONT><B><FONT color=#ffff00>vi dbm.conf</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到并修改成底下几行：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>dbm_ext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .db</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>dbmopen_ext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .db</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>dbmopen_haslock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yes</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test etc]# </FONT><B><FONT color=#ffff00>cd ..</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>./openwebmail-tool.pl --init</FONT></B></FONT> <BR><FONT face=SimSun color=#ffffff size=-1>Welcome to the Open WebMail!</FONT> 
<P><FONT face=SimSun color=#ffffff size=-1>This program is going to send a short message back to the developer,</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>so we could have the idea that who is installing and how many sites are</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>using this software, the content to be sent is:</FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>OS: Linux 2.4.22-1.2199.nptl i686</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>Perl: 5.008003</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>WebMail: Open WebMail 2.40 20040816</FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>Send the site report?(Y/n)</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>sending report...</FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>Thank you.</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun color=#cccccc size=-1>3. 进一步设定：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>cd etc</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root#test etc]# </FONT><B><FONT color=#ffff00>vi openwebmail.conf</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到这一行：</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>default_language&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; en</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 改成这样子：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>default_language&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; zh_TW.Big5</FONT></P></TD></TR></TBODY></TABLE>　 <BR>一般来说，设定成这样就足够您运作 openwebmail 了，不过，您的 WWW 主机必须要能提供 perl 的执行环境，因为 openwebmail 就是以 perl 写成的啊！以 apache 为例，您必须要知道如何启动 perl 的 CGI 执行环境： <BR>　 
<TABLE cols=1 width=550 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> vi /etc/httpd/conf/httpd.conf</FONT></B></FONT> <BR><FONT face=SimSun color=#ffffff size=-1>ScriptAlias /cgi-bin/ "/var/www/cgi-bin/"</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&lt;Directory "/var/www/cgi-bin"&gt;</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp;&nbsp; AllowOverride None</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp;&nbsp; Options None</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp;&nbsp; Order allow,deny</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp;&nbsp; Allow from all</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&lt;/Directory&gt;</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>AddHandler cgi-script .cgi .pl</FONT></TD></TR></TBODY></TABLE>　 <BR>至少上面的设定要设定妥当才行啊！好了，那么如何使用 openwebmail 呢？直接在您的浏览器上面输入： <BR>　 
<UL><FONT color=#000066>http://your.linux.server/cgi-bin/openwebmail/openwebmail.pl</FONT></UL>　 <BR>就可以使用 openwebmail ！很简单吧！不过，如果万一您的认证一直无法成功的话，可以指定一下认证机制看看： <BR>　 
<TABLE cols=1 width=600 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> cd /var/www/cgi-bin/openwebmail/auth</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test auth]# </FONT><B><FONT color=#ffff00>vi auth_unix.pl</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到底下：</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>my $passwdfile_plaintext = $conf{'passwdfile_plaintext'} || '/etc/passwd';</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>my $passwdfile_encrypted = $conf{'passwdfile_encrypted'} || '/etc/master.passwd';</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 改成这样：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>my $unix_passwdfile_plaintext="/etc/passwd";</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>my $unix_passwdfile_encrypted="/etc/shadow";</FONT></TD></TR></TBODY></TABLE>&nbsp;</UL>
<HR width="100%">
<A name=install_mdk10></A><IMG height=23 src="70_files/penguin-s[2].gif" width=17 align=middle nosave=""><FONT color=#000099>MDK10.0 的 Tarball 安装</FONT> <BR>　 
<UL>如果您是使用 MDK 作为您的 Linux 系统时，由于 OpenWebMail 并没有针对这个操作系统来设计 RPM 档案，所以，这里我们以 Tarball 来进行安装。首先，请先确认一下您的 Postfix 与 Apache 已经安装妥当。底下我们就完整的来谈一谈！(同样的，更详细的 Postfix + SASL 的 SMTP 身分认证信息请查阅：<A href="http://linux.vbird.org/linux_server/0390postfix.php">http://linux.vbird.org/linux_server/0390postfix.php</A>) <BR>　 
<TABLE cols=1 width=550 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun color=#ffffff size=-1># 0. 先确定一下底下这些套件都已经安装了(使用 rpm 的方式来安装的)</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> rpm -qa | egrep '(sasl|postfix|imap)'|sort</FONT></B></FONT> <BR><FONT face=SimSun color=#ffffff size=-1>cyrus-sasl-2.1.15-10mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>imap-2002d-8mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>libpostfix1-2.1.1-0.1.100mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>libsasl2-2.1.15-10mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>libsasl2-devel-2.1.15-10mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>libsasl2-plug-anonymous-2.1.15-10mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>libsasl2-plug-login-2.1.15-10mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>libsasl2-plug-plain-2.1.15-10mdk</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>postfix-2.1.1-0.1.100mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 若没有安装任何一个套件，请使用 urpmi 来安装喔！</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun color=#ffccff size=-1># 1. 建立 saslauthd 认证机制与 smtp 认证档案：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>vi /etc/sysconfig/saslauthd</FONT></B></FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>#SASL_AUTHMECH=pam</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>SASL_AUTHMECH=shadow</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 事实上，就是将认证机制修订成为 shadow 就是了。</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>　</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>mkdir /etc/postfix/sasl</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>vi /etc/postfix/sasl/smtpd.conf</FONT></B></FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>pwcheck_method: saslauthd</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mech_list: plain login</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 这一版的 postfix 比较奇怪，他的认证档案预设就是放置在这里喔！</FONT> 
<P><FONT face=SimSun color=#ffccff size=-1># 2. 修订 postfix 的设定档 master.cf：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>vi /etc/postfix/master.cf</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到这个：</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>smtp&nbsp;&nbsp;&nbsp; inet&nbsp;&nbsp;&nbsp; n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; y&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; smtpd</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 改为这个：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtp&nbsp;&nbsp;&nbsp; inet&nbsp;&nbsp;&nbsp; n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; -&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; smtpd</FONT><FONT face=SimSun color=#ffff00 size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 3. 修订 postfix 的设定档 main.cf：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 基本上，内容就有点类似底下这样：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># Postfix 在 MDK 10.0 底下的预设设定数据：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>readme_directory = /usr/share/doc/postfix-2.1.1/README_FILES</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>sample_directory = /usr/share/doc/postfix-2.1.1/samples</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>html_directory = /usr/share/doc/postfix-2.1.1/html</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>sendmail_path = /usr/sbin/sendmail.postfix</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>setgid_group = postdrop</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>command_directory = /usr/sbin</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>manpage_directory = /usr/share/man</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>daemon_directory = /usr/lib/postfix</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>newaliases_path = /usr/bin/newaliases.postfix</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mailq_path = /usr/bin/mailq.postfix</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>queue_directory = /var/spool/postfix</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mail_owner = postfix</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>　</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 使用者的设定数据！</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mynetworks_style = host</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>delay_warning_time = 4h</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_banner = $myhostname ESMTP $mail_name ($mail_version) (Mandrake Linux)</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>unknown_local_recipient_reject_code = 450</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtp-filter_destination_concurrency_limit = 2</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>lmtp-filter_destination_concurrency_limit = 2</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffff00>smtpd_sasl_path = /etc/postfix/sasl:/usr/lib/sasl2&nbsp;</FONT><FONT color=#ffccff> # &lt;== 就是这一行</FONT></FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_application_name = smtpd</FONT> <BR><B><FONT face=SimSun color=#ffff00 size=-1>relayhost = [seed.net.tw]</FONT></B> <BR><FONT face=SimSun color=#ff6666 size=-1>#上面这行很重要，如果想要以动态 IP 架站，就需要 ISP 的 relay host 才行！</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>#详细资料请参考：(因为我的主机在seednet底下，所以....)</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># <A href="http://phorum.study-area.org/viewtopic.php?t=18621" target=_blank>http://phorum.study-area.org/viewtopic.php?t=18621</A></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># <A href="http://phorum.study-area.org/viewtopic.php?t=22806" target=_blank>http://phorum.study-area.org/viewtopic.php?t=22806</A></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffff00>myhostname = <B>hostname.domain.name</B>&nbsp; </FONT><FONT color=#ffccff># &lt;==这里请输入您的主机名称</FONT></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffff00>mydomain = <B>domain.name&nbsp;</B></FONT><FONT color=#ffccff>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # &lt;==这里则是领域名称</FONT></FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>myorigin = $myhostname</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>inet_interfaces = all</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mydestination = $myhostname</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mynetworks = 127.0.0.0/8</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>alias_maps = hash:/etc/postfix/aliases</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>alias_database = hash:/etc/postfix/aliases</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mail_spool_directory = /var/spool/mail</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>debug_peer_level = 2</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>debugger_command =</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PATH=/bin:/usr/bin:/usr/local/bin:/usr/X11R6/bin</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; xxgdb $daemon_directory/$process_name $process_id &amp; sleep 5</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_auth_enable = yes</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_local_domain =</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_recipient_restrictions =</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; reject_unknown_sender_domain</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; reject_unknown_recipient_domain</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; permit_mynetworks</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; permit_sasl_authenticated</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; reject_unauth_destination</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_client_restrictions = hash:/etc/postfix/access, permit_sasl_authenticated,</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; reject_rbl_client&nbsp;&nbsp; relays.ordb.org,</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>&nbsp;&nbsp;&nbsp;&nbsp; reject_rhsbl_client dsn.rfc-ignorant.org</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>smtpd_sasl_security_options = noanonymous</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>notify_classes = resource, software</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>message_size_limit =&nbsp;&nbsp; 31457280</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>mailbox_size_limit = 1000000000</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>header_checks = regexp:/etc/postfix/header_checks</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>body_checks = regexp:/etc/postfix/body_checks</FONT><FONT face=SimSun color=#ffccff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 4. 其它相关的档案：</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>/etc/postfix/access</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>/etc/postfix/header_checks</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>/etc/postfix/body_checks</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>/etc/postfix/aliases</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 相关设定请参考上面提供的连结啊！</FONT><FONT face=SimSun color=#ffccff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 5. 开始启动：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>/etc/rc.d/init.d/saslauthd start</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>/etc/rc.d/init.d/postfix&nbsp;&nbsp; start</FONT></B></FONT></P></TD></TR></TBODY></TABLE>　 <BR>这样就完成了 Postfix 的安装与设定，再接下来则是 Apache 的安装与设定了。 <BR>　 
<TABLE cols=1 width=550 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun color=#ffccff size=-1># 0. 利用 urpmi 来安装所需要的所有的套件！</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> urpmi apache2 php MySQL</FONT></B></FONT> <BR><FONT face=SimSun color=#ffffff size=-1>Preparing...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 1:libmysql12&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 2:libapr0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 3:apache-conf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 4:apache2-common&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 5:perl-Data-ShowTable&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 6:perl-Mysql&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 7:apache2-modules&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 8:apache2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp;&nbsp; 9:libphp_common432&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp; 10:perl-CGI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp; 11:MySQL-client&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp; 12:MySQL-common&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp; 13:php-ini&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp; 14:apache2-mod_php&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>&nbsp; 15:MySQL&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ###########################################</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 因为我再最早安装时，并没有选择 WWW ，所以要安装的数据就很多！</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 另外，请您做好 urpmi 的设定才行！</FONT><FONT face=SimSun color=#ffccff size=-1></FONT> 
<P><FONT face=SimSun color=#ffccff size=-1># 1. 开始启动 httpd ！</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><FONT color=#ffff00> <B>/etc/rc.d/init.d/httpd start</B></FONT></FONT><B><FONT face=SimSun color=#ffccff size=-1></FONT></B> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 2. 让 MySQL 在开机时不会自动启动， httpd 则会自动启动！</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> chkconfig httpd on</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> chkconfig mysql off</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]#</FONT><B><FONT color=#ffff00> chkconfig --list | grep 3:on</FONT></B></FONT> <BR><FONT face=SimSun color=#ffffff size=-1>httpd&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 0:off&nbsp;&nbsp; 1:off&nbsp;&nbsp; 2:on&nbsp;&nbsp;&nbsp; 3:on&nbsp;&nbsp;&nbsp; 4:on&nbsp;&nbsp;&nbsp; 5:on&nbsp;&nbsp;&nbsp; 6:off</FONT></P></TD></TR></TBODY></TABLE>　 <BR>千万注意，我们目前并没有要使用 MySQL 的计划，所以，当然就要将 MySQL 给他关闭啦！而 httpd 则是需要在开机的时候就与以启动才行，所以上面的第二个步骤才需要如此的设定喔！现在，您就可以在您的网址列输入您的主机名称，看看能不能连结 http 提供的 WWW 服务呢？！ <BR>　 <BR>现在，请注意，预设的状态下， MDK 10.0 的 WWW 主网页是放置在 /var/www/html 底下的，但是 MDK 却没有预设的 data 目录，所以我们就必须要给予设定啦！您可以这样做： <BR>　 
<TABLE cols=1 width=600 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun color=#ffccff size=-1># 0. 将 openwebmail 解压缩，并且移动到适当的目录下：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>cd /usr/local/src</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test src]# </FONT><B><FONT color=#ffff00>tar -zxvf /disk1/software/openwebmail-2.40.tar.gz</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test src]#</FONT><B><FONT color=#ffff00> cd cgi-bin/</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test cgi-bin]# </FONT><B><FONT color=#ffff00>mv openwebmail/ /var/www/cgi-bin/</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test cgi-bin]# </FONT><B><FONT color=#ffff00>cd ..</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test src]# </FONT><B><FONT color=#ffff00>rmdir cgi-bin</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test src]# </FONT><B><FONT color=#ffff00>mv data/openwebmail /var/www/html/openwebmail_data</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffccff>[root@test src]# </FONT><B><FONT color=#ffff00>rmdir data</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 同时请注意，您的主机上面必须要有 perl 模块的存在了才行！</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 我的 perl 模块有底下这么多：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-MailTools-1.59-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Crypt-SSLeay-0.51-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Term-Readline-Gnu-1.14-5mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Digest-SHA1-2.04-1mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Mysql-1.22_19-9mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-MDK-Common-1.1.11-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-HTML-Parser-3.35-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-File-Slurp-2002.1031-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Tk-800.024-4mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-SGMLSpm-1.03ii-6mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-SDL-1.20.0-8mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-ldap-0.31-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Glib-1.021-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Gtk2-1.023-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-IO-Tty-1.02-9mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Gtk2-TrayIcon-0.03-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Authen-SASL-2.04-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Locale-gettext-1.01-11mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-TimeDate-1.16-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-HTML-Tagset-3.03-7mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-URI-1.25-1mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Gnome2-Vte-0.02-1mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-devel-5.8.3-5mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-XML-SAX-0.12-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Convert-ASN1-0.16-4mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Data-ShowTable-3.3-9mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-5.8.3-5mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-DBI-1.40-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Libconf-0.33-2.1.100mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-XML-Parser-2.34-1mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-CGI-3.00-2mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-URPM-0.94-11mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Expect-1.15-6mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-Digest-HMAC-1.01-11mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-base-5.8.3-5mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-libwww-perl-5.76-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>perl-XML-NamespaceSupport-1.08-3mdk</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 另外，也需要加入两个必要的模块，您可以使用 FC1 的相关档案，下载点：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ff6666># </FONT><A href="http://turtle.ee.ncku.edu.tw/openwebmail/download/redhat/rpm/packages/fc1/" target=_blank>http://turtle.ee.ncku.edu.tw/openwebmail/download/redhat/rpm/packages/fc1/</A></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ff6666># </FONT><FONT color=#ffff00>rpm -ivh perl-Text-Iconv-1.2-fc1.i386.rpm perl-Compress-Zlib-1.16-12.i386.rpm</FONT></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 两个就可以啦！</FONT><FONT face=SimSun color=#cccccc size=-1></FONT> 
<P><FONT face=SimSun color=#cccccc size=-1># 1. 初始化设定：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>cd /var/www/cgi-bin/openwebmail</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>./openwebmail-tool.pl --init</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 因为 openwebmail 支持相当多种认证机制，因此，我们必须在使用 opewebmail&nbsp;</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 之前，先将 openwebmail 的相关设定做好！上面 openwebmail-tool.pl --init</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 就是在达成这样的目标。此外，这个步骤会进行蛮长的一段时间喔！请耐心等候！</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>cd etc</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test etc]# </FONT><B><FONT color=#ffff00>vi dbm.conf</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到并修改成底下几行：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>dbm_ext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; .pag</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>dbmopen_ext&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; none</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>dbmopen_haslock&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; yes</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@vbird etc]# </FONT><B><FONT color=#ffff00>vi openwebmail.conf</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到并修改成底下几行：</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>domainnames&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; auto</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>auth_module&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; auth_unix.pl</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>mailspooldir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/spool/mail</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>ow_cgidir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/www/cgi-bin/openwebmail</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>ow_cgiurl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /cgi-bin/openwebmail</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>ow_htmldir&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/www/html/openwebmail_data</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>ow_htmlurl&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /openwebmail_data</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>logfile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /var/log/openwebmail.log</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test etc]# </FONT><B><FONT color=#ffff00>cd ..</FONT></B></FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test openwebmail]# </FONT><B><FONT color=#ffff00>./openwebmail-tool.pl --init</FONT></B></FONT><FONT face=SimSun color=#ffffff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>creating db /var/www/cgi-bin/openwebmail/etc/maps/b2g ...done.</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>creating db /var/www/cgi-bin/openwebmail/etc/maps/g2b ...done.</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>creating db /var/www/cgi-bin/openwebmail/etc/maps/lunar ...done.</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>Welcome to the Open WebMail!</FONT><FONT face=SimSun color=#ffffff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>This program is going to send a short message back to the developer,</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>so we could have the idea that who is installing and how many sites are</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>using this software, the content to be sent is:</FONT><FONT face=SimSun color=#ffffff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>OS: Linux 2.6.3-14mdk i686</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>Perl: 5.008003</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>WebMail: Open WebMail 2.40 20040816</FONT><FONT face=SimSun color=#ffffff size=-1></FONT> </P>
<P><FONT face=SimSun size=-1><FONT color=#ffffff>Send the site report?(Y/n) </FONT><B><FONT color=#ffff00>y</FONT></B></FONT> <BR><FONT face=SimSun color=#ffffff size=-1>sending report...</FONT><FONT face=SimSun color=#ffffff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffffff size=-1>Thank you.</FONT><FONT face=SimSun color=#ffffff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 2. 修订认证机制：</FONT> <BR><FONT face=SimSun size=-1><FONT color=#ffffff>[root@test root]# </FONT><B><FONT color=#ffff00>vi /var/www/cgi-bin/openwebmail/auth/auth_unix.pl</FONT></B></FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 找到：</FONT> <BR><FONT face=SimSun color=#ffffff size=-1>my $passwdfile_encrypted = $conf{'passwdfile_encrypted'} || '/etc/master.passwd';</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1># 修改成：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>my $passwdfile_encrypted = '/etc/shadow';</FONT></P></TD></TR></TBODY></TABLE>　 <BR>然后连到您的主机：http://hostname/cgi-bin/openwebmail/openwebmail.pl ，就能够看到您的 OpenWebmail ！同时，如果还是无法看到相关的咚咚，请查阅您的登录档！</UL></UL>
<HR width="100%">
<A name=others></A><IMG height=34 alt="" src="33_files/penguin-m[1].gif" width=25 align=middle nosave=""><FONT color=#000099 size=+1>一些其它的设定：</FONT> 
<BLOCKQUOTE>除了既有的设定之外，如果您想要其它的设定时，这里提供几个简单的设定： <BR>　 
<TABLE cols=1 width=550 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun color=#ffccff size=-1># 1. 网络硬盘：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>如果不想提供网络硬盘的话，可以在底下的档案：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>/var/www/cgi-bin/openwebmail/etc/opewebmail.conf</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>加入这行：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>enable_webdisk no</FONT><FONT face=SimSun color=#ff6666 size=-1></FONT> 
<P><FONT face=SimSun color=#ffccff size=-1># 2. 提供 ssh 联机：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>如果不想提供网络联机的话，可以在底下的档案：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>/var/www/cgi-bin/openwebmail/etc/opewebmail.conf</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>加入这行：</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>enable_sshterm no</FONT><FONT face=SimSun color=#ffccff size=-1></FONT> </P>
<P><FONT face=SimSun color=#ffccff size=-1># 3. 让登入更简单：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>如果不想在网址列输入长长的一段文字，可以修改成为：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>vi httpd.conf (请依照您的系统来修订！)</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>ScriptAlias&nbsp; /webmail&nbsp;&nbsp;&nbsp;&nbsp; /var/www/cgi-bin/openwebmail/openwebmail.pl</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>or</FONT> <BR><FONT face=SimSun color=#ffff00 size=-1>ScriptAlias&nbsp; /webmail.pl&nbsp; /var/www/cgi-bin/openwebmail/openwebmail.pl</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>然后重新启动 apache ，如此一来，您可以在网址列输入：</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>http://hostname/webmail or http://hostname/webmail.pl</FONT> <BR><FONT face=SimSun color=#ff6666 size=-1>就可以进入 openwebmail ！</FONT></P></TD></TR></TBODY></TABLE>&nbsp;</BLOCKQUOTE>
<HR width="100%">
<A name=faq></A><FONT color=#000099 size=+1>问题与解决：</FONT> 
<UL>
<LI><FONT color=#000099>还是无法执行 openwebmail：</FONT> <BR><FONT color=#000000>一般来说，安装好 openwebmail 之后，应该是立即可以使用了，不过，如果您一直无法进入 openwebmail 的欢迎画面，那么请特别留意：</FONT> 
<OL>
<LI><FONT color=#000000>在 openwebmail.conf 这个设定档当中，是否填写了适当的认证机制(auth_unit.pl)；</FONT> 
<LI><FONT color=#000000>在 auth_unix.pl 这个设定档当中，是否填写了正确的密码认证档案？</FONT> 
<LI><FONT color=#000000>您的 WWW 是否提供 perl 的 CGI 执行环境？</FONT> 
<LI><FONT color=#000000>仔细查阅 /var/log/httpd/error_log 及 /var/log/openwebmail.log 来解决问题！</FONT> </LI></OL><FONT color=#000000>　</FONT> 
<LI></LI></UL>
<HR width="100%">
<A name=reference></A><FONT color=#000099 size=+1>参考资源：</FONT> 
<UL>
<LI>OpenWebMail 的下载：<A href="http://turtle.ee.ncku.edu.tw/openwebmail/download/" target=_blank>http://turtle.ee.ncku.edu.tw/openwebmail/download/</A> 
<LI>OpenWebMail 台湾主站：<A href="http://turtle.ee.ncku.edu.tw/openwebmail/" target=_blank>http://turtle.ee.ncku.edu.tw/openwebmail/</A> 
<LI>Ultraman 的 OpenWebMail 实作：<A href="http://linux.vbird.org/somepaper/20030317-openwebmail.php" target=_blank>http://linux.vbird.org/somepaper/20030317-openwebmail.php</A> </LI></UL>
<CENTER><FONT color=#3333ff size=+1><A href="http://linux.vbird.org/linux_server/0520openwebmail.php" target=_self><FONT face=SimSun>简易</FONT><FONT face="Times New Roman,Times"> OpenWebMail </FONT><FONT face=SimSun>设定</FONT></A></FONT></CENTER>
<HR width="100%">
<FONT face=SimSun color=#000066 size=-1>2004/08/26：首次完成</FONT> <BR>
<HR width="100%">
<FONT face=SimSun color=#3333ff size=-1>2004/08/26 以来统计人数</FONT> <BR><IMG height=15 src="70_files/Count[18].gif" width=60 align=middle border=1 nosave=""> 
<HR width="100%">

<CENTER><A href="http://linux.vbird.org/" target=_top><IMG height=25 src="61_files/VBirdTitle2[10].jpg" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_basic"><IMG height=25 src="39_files/icon_system[3].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_server"><IMG height=25 src="55_files/icon_server[13].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_security"><IMG height=25 src="71_files/icon_security[10].jpg" width=90 border=0 nosave=""></A> <A href="http://phorum.vbird.org/" target=_blank><IMG height=25 src="60_files/icon_forums[10].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/adsl"><IMG height=25 src="50_files/icon_adsl[13].gif" width=90 border=0 nosave=""></A> <BR><FONT color=#000066 size=-1>Designed by <A href="mailto:vbird@tsai.adsldns.org">VBird</A> during 2001-2004.&nbsp; Aerosol Lab.</FONT></CENTER></BODY>