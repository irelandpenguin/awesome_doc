<HEAD><TITLE>鸟哥的 Linux 私房菜 -- vi 文书处理器</TITLE>
<META http-equiv=Content-Type content="text/html; charset=gb2312">
<META content=VBird name=Author>
<META content="Mozilla/4.5 [zh-TW] (WinNT; I) [Netscape]" name=GENERATOR><!-- saved from url=(0022)http://internet.e-mail -->
<STYLE>
   <!--
   body{background-image=url("22_files/VBirdLinux[1].jpg");background-ATTACHMENT=FIXED}
   -->
</STYLE>
</head>
<BODY style="CURSOR: auto" background="22_files/VBirdLinux[7].jpg" nosave="">
<CENTER>
<CENTER><B><FONT color=#3333ff size=+2><FONT face=SimSun>鸟哥的</FONT><FONT face="Times New Roman,Times"> Linux </FONT><FONT face=SimSun>与</FONT><FONT face="Times New Roman,Times"> ADSL </FONT><FONT face=SimSun>私房菜</FONT></FONT></B> <BR><A href="http://linux.vbird.org/" target=_top><IMG height=25 src="61_files/VBirdTitle2[10].jpg" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_basic"><IMG height=25 src="39_files/icon_system[3].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_server"><IMG height=25 src="55_files/icon_server[13].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_security"><IMG height=25 src="71_files/icon_security[10].jpg" width=90 border=0 nosave=""></A> <A href="http://phorum.vbird.org/" target=_blank><IMG height=25 src="60_files/icon_forums[10].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/adsl"><IMG height=25 src="50_files/icon_adsl[13].gif" width=90 border=0 nosave=""></A> <BR>
<HR width="100%">
</CENTER><FONT color=#3333ff size=+2><A href="http://linux.vbird.org//linux_basic/0310vi.php" target=_self><FONT face="Times New Roman CE">vi </FONT><FONT face=SimSun>文字处理软件</FONT></A></FONT></CENTER>
<DIV align=right><FONT face=SimSun color=#3333ff size=-1>最近更新日期：2003/02/25</FONT></DIV><FONT color=#000099 size=-2>　</FONT> 
<TABLE cols=1 width="100%" bgColor=#ffcccc border=1>
<TBODY>
<TR>
<TD><FONT color=#000099 size=-1>一个系统管理员至少应该要熟悉一种字处理软件，以方便未来的系统管理，包括系统设定与架站时候的参数设定档修订等等工作之进行。在 Unix-Like 系统中，肯定看的到的文书编辑器就是 vi 啦，他算是最正规的文字接口下的文书处理器了。为什么文书处理器很重要呢？还记得前两个章节中我们提到的 /etc/fstab 这个档案吗？您如果想要修改他的话，要如何修改呢？当然是使用文书编辑器来编辑他，那么在 Linux 的指令列模式当中使用什么文书编辑器呢呢？当然几乎就是 vi 啦！此外，后续的 shell scripts 章节与 Linux 架站设定的档案等等，几乎都是使用他来进行设定耶！那 vi 重不重要呢？你猜猜?</FONT></TD></TR></TBODY></TABLE><FONT color=#000099 size=-2>　</FONT> <BR><FONT color=#000099 size=+1><A href="#vi_what">vi 简易说明</A></FONT> <BR><FONT color=#000099 size=+1><A href="#ex">简易执行范例</A></FONT> <BR><FONT color=#000099 size=+1><A href="#command">命令列内容说明</A></FONT> <BR><FONT color=#000099 size=+1><A href="#case_study">一个案例练习</A></FONT> <BR><FONT color=#000099 size=+1><A href="#LPI">本章与 LPI 的关系</A></FONT> <BR><FONT color=#000099 size=+1><A href="#FAQ">本章习题练习</A></FONT> <BR>
<HR width="100%">
<A name=vi_what></A><FONT color=#000099 size=+1>vi 简易说明</FONT> 
<BLOCKQUOTE>由前面一路走来，我们一直建议使用文字模式来处理 Linux 的系统设定问题，因为不但可以让您比较容易了解到 Linux 的运作状况，也比较容易了解整个设定的基本精神，更能『保证』您的修改可以顺利的被运作 ( 这里要再次的强调，不同的 Linux distribution 各有其不同的附加软件，例如 Red Hat 的 userconf, Linuxconf, ntsysv 与 setup 等等，而 Caldera 则有 COAS 等等，因此，如果您只会使用此种类型的软件来控制您的 Linux 系统时，当接管不同的 Linux distribution 时，呵呵！那可就苦恼了！ ) 所以，<FONT color=#000066>在 Linux 的系统中使用文字编辑器来编辑您的 Linux 参数设定档，嗯！可是一件很重要的事情呦</FONT>！所以说嘛！系统管理员至少应该要熟悉一种文书处理器的！ 
<P>由 <A href="http://linux.vbird.org//linux_basic/0110whatislinux.php">Linux是什么 </A>介绍中，我们知道 <FONT color=#000066>Linux 与 Unix 系统中的参数文件几乎都是 ASCII 码的『纯文字』文件</FONT>！因此，利用简单的文字编辑软件就可以马上修改 Linux 的参数档！然而，与 Windows 不同的是，如果您用惯了 Microsoft Word 或 Corel Wordperfect 的话，那么除了 Xwindows 里面的编辑程序(如 xemacs )用起来尚可应付外，于 Linux 的文字模式下，会觉得档案编辑程序都没有 Windows 程序那么方便。( 注：什么是 ASCII 的纯文本文件呢？说穿了，就是您开启的档案可以将内容给您看到的档案，而不是呈现乱码的档案，那就是纯文字文件了！当您以 Windows 的 word 存一个档案时，在 DOS 的情况下使用 type ，嗯！完全不知到内容是什么？因为会出现很多的乱码，那并非是纯文字文件，而如果以 word 在存盘时，选择『纯文字类型』，嗯！那就可以使用 type 看到该档案的内容了！总之，纯文字文件相当的容易修改就是了！ ) </P>
<P>无论如何，要管理好 Linux 系统，纯文字的手工设定仍然是需要的！所以请您千万不要嫌麻烦，努力的将下文参详一下吧！以下我们以最常见到的 vi 这套文书软件来介绍 Linux 底下的文书编辑动作。 ( 注： vi 是 Unix 预设的文字处理软件，当然，也是 Linux 预设的文字处理软件！ ) </P>
<P>基本上 vi 共分为三种模式，分别是『<FONT color=#000066>一般模式</FONT>』、『<FONT color=#000066>编辑模式</FONT>』与『<FONT color=#000066>指令列命令模式</FONT>』三种！ </P>
<UL>
<LI><FONT color=#000099>一般模式</FONT>：以 vi 处理一个档案的时后，一进入该档案就是一般模式了。在这个模式中，你可以使用『上下左右』按键来移动光标，您可以使用『删除字符』或『删除整行』来处理档案内容，也可以使用『复制、贴上』来处理您的文件数据。 </LI></UL>
<UL>
<LI><FONT color=#000099>编辑模式</FONT>：在一般模式中可以处理删除、复制、贴上等等的动作，但是却无法编辑的！要等到您按下『<FONT face=SimSun color=#000066>i, I, o, O, a, A, r, R</FONT>』等字母之后才会进入编辑模式。注意了！通常在 Linux 中，按下上述的字母时，在画面的左下方会出现『 <FONT color=#000066>INSERT 或 REPLACE </FONT>』的字样，才可以输入任何字来输入到您的档案中！而如果要回到一般模式时，则必须要按下『<B><FONT color=#000066>Esc</FONT></B>』这个按键即可退出编辑模式。 </LI></UL>
<UL>
<LI><FONT color=#000099>指令列命令模式</FONT>：在一般模式当中，输入『<FONT color=#000066> : 或 / </FONT>』就可以将光标移动到最底下那一行，在这个模式当中，可以提供您『搜寻资料』的动作，而读取、存盘、大量取代字符、离开 vi 、显示行号 等等的动作则是在此模式中达成的！ </LI></UL>简单的说，我们可以将这三个模式想成底下的图标来表示之： 
<CENTER><IMG height=292 src="22_files/0310vi_1[1].jpg" width=465 nosave=""></CENTER>闲话不多说，我们底下以一个简单的例子来进行说明吧！</BLOCKQUOTE>
<HR width="100%">
<A name=ex></A><FONT color=#000099 size=+1>简易执行范例</FONT> 
<BLOCKQUOTE>我们怎么使用 vi 建立一个档名为 test.txt 的资料呢？也是很简单的啦， 
<OL>
<LI><B><FONT color=#000099>使用 vi 进入一般模式；</FONT></B> 
<TABLE cols=1 width=500 bgColor=#000000 border=1>
<TBODY>
<TR>
<TD><FONT face=SimSun size=-1><FONT color=#ffffff>[root @test root]# </FONT><FONT color=#ffff00>vi test.txt</FONT></FONT></TD></TR></TBODY></TABLE>直接输入『 vi 档名』即可进入 vi 了！如下图所示，左下角还会显示这个档案目前的状态！如果是新建档案会显示 [New File]，如果是以存在的档案，则会显示目前的文件名、行数与字符数，例如：『"/etc/man.config" 145L, 4614C』 <BR><IMG height=196 src="22_files/0310vi_2[1].jpg" width=397 nosave=""> <BR>　 
<LI><B><FONT color=#000099>按下 i 进入编辑模式，开始编辑文字；</FONT></B> <BR>在一般模式之中，只要按下 I, o, a 等字符，就可以进入编辑模式了！在编辑模式当中，您可以发现在左下角会出现 CINSERT- 的画面，那就是可以输入任意字符的提示！这个时候，键盘上除了 [Esc] 这个按键之外，其它的按键都可以视作为一般的输入按钮了，所以您可以进行任何的编辑！（注：在 vi 里面， [tab] 这个按钮所得到的结果与空格符所得到的结果是不一样的，特别强调一下！） <BR><IMG height=195 src="22_files/0310vi_3[1].jpg" width=399 nosave=""> <BR>　 
<LI><B><FONT color=#000099>按下 [ESC] 按钮回到一般模式；</FONT></B> <BR>好了，假设我已经按照上面的样式给他编辑完毕了，那么应该要如何退出呢？是的！没错！就是给他按下 [Esc] 这个按钮即可！马上你就会发现画面左下角的 C INSERT C 不见了！ <BR>　 
<LI><B><FONT color=#000099>在一般模式中按下 :wq 储存后离开 vi ！</FONT></B> <BR>OK，我们要存档了，存盘并离开的指令很简单，输入『:wq』即可存档离开！（注意了，按下 : 该光标就会移动到最底下一行去！）这时你在提示字符后面输入『 ls -l 』即可看到我们刚刚建立的 test.txt 档案啦！整个图示有点像底下这样： <BR><IMG height=195 src="22_files/0310vi_4[1].jpg" width=401 nosave=""> <BR>如此一来，您的档案 test.txt 就已经建立起来！很简单吧！需要注意的是，如果您的档案权限不对，例如为 -r--r--r-- 时，那么可能会无法写入，那么可以使用『强制写入』的方式吗？可以！使用『:wq!』多加一个惊叹号即可！不过，需要特别注意呦！那个是在『您的权限可以改变』的情况下才能成立的！关于权限的概念，请参考一下 <A href="http://linux.vbird.org//linux_basic/0210filepermission.php">Linux 的档案权限概念 </A>！</LI></OL></BLOCKQUOTE>
<HR width="100%">
<A name=command></A><FONT color=#000099 size=+1>命令列内容说明</FONT> 
<BLOCKQUOTE>如前所述，所谓的命令列或命令模式，就是在最下面一行没有显示『<FONT color=#000099>--INSERT--</FONT>』或者『<FONT color=#000099>--REPLACE--</FONT>』字样的时候。通常在命令列中的指令有下面几种：（注意，当按下『:』 时，光标会自动移动到屏幕的最下面一行！） <BR>　 
<TABLE cols=2 width="90%" border=1>
<TBODY>
<TR>
<TD width=200 bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>一般模式：</FONT></TD>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>移动光标</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>h 或 向左方向键</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标向左移动一个字符</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>j 或 向下方向键</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标向下移动一个字符</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>k 或 向上方向键</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标向上移动一个字符</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>l 或 向右方向键</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标向右移动一个字符</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>[Ctrl] + [f]</FONT></CENTER></TD>
<TD><FONT face=SimSun>屏幕『向前』移动一页</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>[Ctrl] + [b]</FONT></CENTER></TD>
<TD><FONT face=SimSun>屏幕『向后』移动一页</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>[Ctrl] + [d]</FONT></CENTER></TD>
<TD><FONT face=SimSun>屏幕『向前』移动半页</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>[Ctrl] + [u]</FONT></CENTER></TD>
<TD><FONT face=SimSun>屏幕『向后』移动半页</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>+</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标移动到非空格符的下一列</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>-</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标移动到非空格符的上一列</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>n&lt;space&gt;</FONT></CENTER></TD>
<TD><FONT face=SimSun>按下数字后再按空格键，光标会向右移动这一行的 n 个字符。例如 20&lt;space&gt; 则光标会向后面移动 20 个字符距离。</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>0</FONT></CENTER></TD>
<TD><FONT face=SimSun>这是数字『 0 』：移动到这一行的最前面字符处</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>$</FONT></CENTER></TD>
<TD><FONT face=SimSun>移动到这一行的最后面字符处</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>H</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标移动到这个屏幕的最上方那一行</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>M</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标移动到这个屏幕的中央那一行</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>L</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标移动到这个屏幕的最下方那一行</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>G</FONT></CENTER></TD>
<TD><FONT face=SimSun>移动到这个档案的最后一行</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>nG</FONT></CENTER></TD>
<TD><FONT face=SimSun>移动到这个档案的第 n 行。例如 20G 则会移动到这个档案的 20 行(可配合 :set nu)</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>n&lt;Enter&gt;</FONT></CENTER></TD>
<TD><FONT face=SimSun>光标向下移动 n 行</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>一般模式：</FONT></TD>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>搜寻与取代</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>/word</FONT></CENTER></TD>
<TD><FONT face=SimSun>向光标之后寻找一个字符串名称为 word 的字符串。</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>?word</FONT></CENTER></TD>
<TD><FONT face=SimSun>向光标之前寻找一个字符串名称为 word 的字符串。</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:n1,n2s/word1/word2/g</FONT></CENTER></TD>
<TD><FONT face=SimSun>在第 n1 与 n2 行之间寻找 word1 这个字符串，并将该字符串取代为 word2 ！</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:1,$s/word1/word2/g</FONT></CENTER></TD>
<TD><FONT face=SimSun>从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:1,$s/word1/word2/gc</FONT></CENTER></TD>
<TD><FONT face=SimSun>从第一行到最后一行寻找 word1 字符串，并将该字符串取代为 word2 ！</FONT>且在取代前显示提示字符给使用者确认（conform）是否需要取代！（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>一般模式：</FONT></TD>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>删除、复制与贴上</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>x, X</FONT></CENTER></TD>
<TD><FONT face=SimSun>x 为向后删除一个字符， X 为向前删除一个字符</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>nx</FONT></CENTER></TD>
<TD><FONT face=SimSun>向后删除 n 个字符</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>dd</FONT></CENTER></TD>
<TD><FONT face=SimSun>删除游标所在的那一整列</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>ndd</FONT></CENTER></TD>
<TD><FONT face=SimSun>删除光标所在的向下 n 列，例如 20dd 则是删除 20 列</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>d1G</FONT></CENTER></TD>
<TD><FONT face=SimSun>删除游标所在到第一行的所有数据</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>dG</FONT></CENTER></TD>
<TD><FONT face=SimSun>删除游标所在到最后一行的所有数据</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>yy</FONT></CENTER></TD>
<TD><FONT face=SimSun>复制游标所在的那一行</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>nyy</FONT></CENTER></TD>
<TD><FONT face=SimSun>复制光标所在的向下 n 列，例如 20yy 则是复制 20 列</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>y1G</FONT></CENTER></TD>
<TD><FONT face=SimSun>复制游标所在列到第一列的所有数据</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>yG</FONT></CENTER></TD>
<TD><FONT face=SimSun>复制游标所在列到最后一列的所有数据</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>p, P</FONT></CENTER></TD>
<TD><FONT face=SimSun>p 为复制的数据在光标下一行贴上，P 则为贴在游标上一行！</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>J</FONT></CENTER></TD>
<TD><FONT face=SimSun>将光标所在列与下一列的数据结合成同一列</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>c</FONT></CENTER></TD>
<TD><FONT face=SimSun>重复删除多个数据，例如向下删除 10 行，[ 10cj ]</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>u</FONT></CENTER></TD>
<TD><FONT face=SimSun>复原前一个动作。</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>进入编辑模式</FONT></TD>
<TD bgColor=#ffcccc><FONT face=SimSun>&nbsp;</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>i, I</FONT></CENTER></TD>
<TD><FONT face=SimSun>插入：在目前的光标所在处插入输入之文字，已存在的文字会向后退；（<FONT color=#3333ff>常用</FONT>）</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>a, A</FONT></CENTER></TD>
<TD><FONT face=SimSun>增加：由目前光标所在的下一个字开始输入，已存在的文字会向后退：（<FONT color=#3333ff>常用</FONT>）</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>o, O</FONT></CENTER></TD>
<TD><FONT face=SimSun>插入新的一行：从光标所在的下一行枝行首开始输入文字；（<FONT color=#3333ff>常用</FONT>）</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>r, R</FONT></CENTER></TD>
<TD><FONT face=SimSun>取代：r 会取代光标所在的那一个字符；R</FONT>会一直取代光标所在的文字，直到按下 ESC 为止；（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>Esc</FONT></CENTER></TD>
<TD><FONT face=SimSun>退出编辑模式，回到一般模式中</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD bgColor=#ffcccc><FONT face=SimSun color=#000099 size=+1>指令列命令模式</FONT></TD>
<TD bgColor=#ffcccc><FONT face=SimSun>&nbsp;</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:w</FONT></CENTER></TD>
<TD><FONT face=SimSun>将编辑的数据写入硬盘档案中</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:w!</FONT></CENTER></TD>
<TD><FONT face=SimSun>若档案属性为『只读』时，强制写入该档案</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:q</FONT></CENTER></TD>
<TD><FONT face=SimSun>离开 vi </FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:q!</FONT></CENTER></TD>
<TD><FONT face=SimSun>若曾修改过档案，又不想储存，使用 ! 为强制离开不储存档案。</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:wq</FONT></CENTER></TD>
<TD><FONT face=SimSun>储存后离开，若为 :wq! 则为强制储存后离开</FONT>（<FONT color=#3333ff>常用</FONT>）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:e!</FONT></CENTER></TD>
<TD>将档案还原到最原始的状态！</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>ZZ</FONT></CENTER></TD>
<TD>若档案没有更动，则不储存离开，若档案已经经过更动，则储存后离开！</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:w [filename]</FONT></CENTER></TD>
<TD><FONT face=SimSun>将编辑的数据储存成另一个档案</FONT>（类似另存新档）</TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:r [filename]</FONT></CENTER></TD>
<TD><FONT face=SimSun>在编辑的数据中，读入另一个档案的数据。亦即将 『filename』这个档案内容加到游标所在行后面</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:set nu</FONT></CENTER></TD>
<TD><FONT face=SimSun>显示行号，设定之后，会在每一行的前缀显示该行的行号</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:set nonu</FONT></CENTER></TD>
<TD><FONT face=SimSun>与 set nu 相反，为取消行号！</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>n1,n2 w [filename]</FONT></CENTER></TD>
<TD><FONT face=SimSun>将 n1 到 n2 的内容储存成 filename 这个档案。</FONT></TD></TR>
<TR>
<TD>
<CENTER><FONT face=SimSun>:! command</FONT></CENTER></TD>
<TD><FONT face=SimSun>暂时离开 vi 到指令列模式下执行 command 的显示结果！例如[ :! ls /home ]</FONT></TD></TR></TBODY></TABLE>
<P>OK！会这些指令就已经很厉害了，因为常用到的指令也只有不到一半！通常 vi 的指令除了上面 VBird 注明的常用的几个外，其它是不用背的，你可以做一张简单的指令表在你的屏幕墙上，一有疑问可以马上的查询呦！</P></BLOCKQUOTE>
<HR width="100%">
<A name=case_study></A><FONT color=#000099 size=+1>一个案例练习</FONT> 
<BLOCKQUOTE>来来来！测试一下您是否已经熟悉 vi 这个指令呢？请依照底下的需求进行您的指令动作( 请注意，该档案为 Mandrake 9.0 所附上的档案内容，如果是其它的 distribution ，可能结果会不太一样！ )，然后看一下结果在屏幕前面显示什么？ 
<OL>
<LI><FONT face=SimSun>请在 /root 这个目录下建立一个名为 vitest 的目录；</FONT> 
<LI><FONT face=SimSun>进入 vitest 这个目录当中；</FONT> 
<LI><FONT face=SimSun>将 /etc/man.config 拷贝到本目录底下；</FONT> 
<LI><FONT face=SimSun>使用 vi 开启本目录下的 man.config 这个档案；</FONT> 
<LI><FONT face=SimSun>在 vi 中设定一下行号；</FONT> 
<LI><FONT face=SimSun>移动到第62 行，向右移动 40 个字符，请问您看到的双引号内是什么目录？</FONT> 
<LI><FONT face=SimSun>移动到第一行，并且向下搜寻一下『 teTeX 』这个字符串，请问他在第几行？</FONT> 
<LI><FONT face=SimSun>接着下来，我要将 50 到 100 行之间的 man 改为 MAN ，并且一个一个挑选是否需要修改，如何下达指令？</FONT> 
<LI><FONT face=SimSun>修改完之后，突然反悔了，要全部复原，有哪些方法？</FONT> 
<LI><FONT face=SimSun>我要复制 51 到 60 行这十行的内容，并且贴到最后一行之后；</FONT> 
<LI><FONT face=SimSun>删除 11 到 30 行之间的 20 行；</FONT> 
<LI><FONT face=SimSun>将这个档案另存成一个 man.test.config 的n名；</FONT> 
<LI><FONT face=SimSun>去到第 29 行，并且删除 15 个字符；</FONT> 
<LI><FONT face=SimSun>请问目前的档案有多少行与多少字符？</FONT> 
<LI><FONT face=SimSun>储存后离开吧！</FONT> </LI></OL>整个的步骤可以如下所示： 
<OL>
<LI><FONT face=SimSun color=#000066>mkdir /root/vitest</FONT> 
<LI><FONT face=SimSun color=#000066>cd /root/vitest</FONT> 
<LI><FONT face=SimSun color=#000066>cp /etc/man.config .</FONT> 
<LI><FONT face=SimSun color=#000066>vi man.config</FONT> 
<LI><FONT face=SimSun color=#000066>: set nu</FONT> 
<LI><FONT face=SimSun color=#000066>先按下 62G ，再按下 40 + 向右键，会看到『/dir/bin/foo』</FONT> 
<LI><FONT face=SimSun color=#000066>先按下 1G ，然后按下 /teTeX 搜寻，会看到他在第 51 行！</FONT> 
<LI><FONT face=SimSun color=#000066>:50,100s/man/MAN/gc</FONT> 
<LI><FONT face=SimSun color=#000066>(1)简单的方法可以一直按 u 回复到原始状态，(2)使用不储存离开 :q! 之后，再重新读取一次该档案</FONT> 
<LI><FONT face=SimSun color=#000066>51G 然后在 10yy 之后按下 G 到最后一行，再给他 p 贴上十行！</FONT> 
<LI><FONT face=SimSun color=#000066>11G 之后，再给他 20dd 即可删除 20 行了；</FONT> 
<LI><FONT face=SimSun color=#000066>:w man.test.config</FONT> 
<LI><FONT face=SimSun color=#000066>29G 之后，再给他 15x 即可删除 15 个字符；</FONT> 
<LI><FONT face=SimSun color=#000066>135行，共 3903 个字符</FONT> 
<LI><FONT face=SimSun color=#000066>:wq!</FONT> </LI></OL>如果您的结果都可以查的到，那么 vi 的使用上面应该没有太大的问题啦！剩下的问题会是在…..打字练习….</BLOCKQUOTE>
<HR width="100%">
<A name=LPI></A><FONT color=#000099 size=+1>本章与 LPI 的关系：</FONT> 
<BLOCKQUOTE>在 <A href="http://www.lpi.org/" target=_blank>http://www.lpi.org</A> 所提供的 topic 当中， LPI 101 的 Topic 103 之 1.103.8 提到：『<FONT color=#000066>应试者应该能够学会使用 vi 文书编辑器，学习的目标包含了 vi 的插入、编辑、删除、复制与搜寻等功能的练习！</FONT>』至于使用到的指令与 vi 当中所会用到的数据与指令为： 
<UL>
<LI><FONT face=SimSun color=#000066>vi</FONT> 
<LI><FONT face=SimSun color=#000066>/, ? (请看搜寻部分)</FONT> 
<LI><FONT face=SimSun color=#000066>h, j, k, l (移动光标的部分，这个较常考！)</FONT> 
<LI><FONT face=SimSun color=#000066>G, H, L (移动光标的部分)</FONT> 
<LI><FONT face=SimSun color=#000066>i, c, d, dd, p, o, a (删除、编辑与贴上的部分)</FONT> 
<LI><FONT face=SimSun color=#000066>ZZ, :w!, :q!, :e!</FONT> 
<LI><FONT face=SimSun color=#000066>:!</FONT> </LI></UL></BLOCKQUOTE>
<HR width="100%">
<A name=FAQ></A><FONT color=#000099 size=+1>本章习题练习 ( 要看答案请将鼠标移动到『答：』底下的空白处，按下左键圈选空白处即可察看 )</FONT> 
<UL>
<LI><FONT face=SimSun color=#000000>我要在某个档案的第 34 行向右移动 15 个字符，应该在一般模式下达什么指令？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<OL>
<OL>
<LI><FONT face=SimSun color=#ffffff>先按下 11G 到第 11 行；</FONT> 
<LI><FONT face=SimSun color=#ffffff>再按下 [ 15 + 向右键 ]，或 [ 15l ] 亦可！</FONT> </LI></OL><FONT face=SimSun color=#000000>　</FONT></OL>
<LI><FONT face=SimSun color=#000000>在 vi 里面， PageDown 按钮可以使用什么组合键来取代？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>[Ctrl] + f 可以向后翻一页</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何去到 vi 该档案里面的页首或页尾？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>去页首按下 1G ；</FONT> <BR><FONT face=SimSun color=#ffffff>去页尾按下&nbsp; G 即可</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何在一行中，移动到行头及行尾？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>移动到行头，按 0 ，</FONT> <BR><FONT face=SimSun color=#ffffff>移动到行尾按 $ 即可！</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>进入编辑模式的按钮？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>i, I, o, O, a, A, R</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>vi 里面， r 有什么功能？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>取代光标所在的那个字符！</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何将目前的页面另存新档？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>:w filename</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>在 linux 底下最常使用的文书编辑器为 vi ，请问如何进入编辑模式？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL>
<LI><FONT face=SimSun color=#ffffff>在一般模式底下输入： i, I, a, A 为在本行当中输入新字符；（出现 CInsert- ）</FONT> 
<LI><FONT face=SimSun color=#ffffff>在一般模式当中输入： o, O 为在一个新的一行输入新字符；</FONT> 
<LI><FONT face=SimSun color=#ffffff>在一般模式当中输入： r, R 为取代字符！（左下角出现 CReplace-）</FONT> </LI></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何由编辑模式跳回一般模式？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>可以按下[Esc]</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>若上下左右键无法使用时，请问如何在一般模式移动光标？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>[h, j, k, l]分别代表[左、下、上、右]</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>若 [pagedown] [ pageup] 在一般模式无法使用时，如何往前或往后翻一页？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>向下翻 [Ctrl] + [f]</FONT> <BR><FONT face=SimSun color=#ffffff>向前翻 [Ctrl] + [b]</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何到本档案的最后一行、第一行；本行的第一个字符、最后一个字符？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>分别为：G, 1G, 0, $</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何删除一行、n行；如何删除一个字符？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>分别为 dd, ndd, x 或 X （dG 及 d1G 分别表示删除到页首及页尾）</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何复制一行、n行并加以贴上？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>分别为 yy, nyy, p 或 P</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何搜寻 string 这个字符串？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>?string (往前搜寻)</FONT> <BR><FONT face=SimSun color=#ffffff>/string (往后搜寻)</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何取代 word1 成为 word2，而若需要使用者确认机制，又该如何？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>:1,$s/word1/word2/g 或</FONT> <BR><FONT face=SimSun color=#ffffff>:1,$s/word1/word2/gc （需要使用者确认）</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何读取一个档案 filename 进来目前这个档案？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>:r filename</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何另存新档成为 newfilename？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>:w newfilename</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>如何存档、离开、存档后离开、强制存档后离开？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>:w； :q： :wq； :wq!</FONT></UL></LI></UL>
<UL>
<LI><FONT face=SimSun color=#000000>在 vi 底下作了很多的编辑动作之后，却想还原成原来的档案内容，应该怎么进行？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>直接按下 :e! 即可恢复成档案的原始状态！</FONT> <BR><FONT face=SimSun color=#000000>　</FONT></UL>
<LI><FONT face=SimSun color=#000000>我在 vi 这个程序当中，不想离开 vi ，但是想执行 ls /home 这个指令，vi 有什么额外的功能可以达到这个目的：</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>事实上，可以使用[ :! ls /home ]不过，如果你学过后面的章节之后，你会发现，执行[ ctrl + z ]亦可暂时退出 vi 让你在指令列模式当中执行指令喔！</FONT> <BR><FONT face=SimSun color=#000000>　</FONT></UL>
<LI><FONT face=SimSun color=#000000>如何设定与取消行号？</FONT> <BR><FONT face=SimSun color=#000000>答：</FONT> 
<UL><FONT face=SimSun color=#ffffff>:set nu</FONT> <BR><FONT face=SimSun color=#ffffff>:set nonu</FONT></UL></LI></UL>
<CENTER><FONT color=#3333ff size=+1><A href="http://linux.vbird.org//linux_basic/0310vi.php" target=_self><FONT face="Times New Roman CE">vi </FONT><FONT face=SimSun>文字处理软件</FONT></A></FONT></CENTER>
<HR width="100%">
<FONT face=SimSun color=#000066 size=-1>2002/04/05：第一次完成</FONT> <BR><FONT face=SimSun color=#000066 size=-1>2003/02/07：重新编排与加入 FAQ</FONT> <BR><FONT face=SimSun color=#000066 size=-1>2003/02/25：新加入本章节与 LPI 的相关性说明！</FONT> <BR><FONT face=SimSun color=#000066 size=-1>http://info.sayya.org/~edt1023/vim/</FONT> <BR>
<HR width="100%">
<FONT face=SimSun color=#3333ff size=-1>2002/ 01/21以来统计人数</FONT> <BR><IMG height=15 src="22_files/Count[2].gif" width=60 align=middle nosave="">
<HR width="100%">
 
<CENTER><A href="http://linux.vbird.org/" target=_top><IMG height=25 src="61_files/VBirdTitle2[10].jpg" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_basic"><IMG height=25 src="39_files/icon_system[3].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_server"><IMG height=25 src="55_files/icon_server[13].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/linux_security"><IMG height=25 src="71_files/icon_security[10].jpg" width=90 border=0 nosave=""></A> <A href="http://phorum.vbird.org/" target=_blank><IMG height=25 src="60_files/icon_forums[10].gif" width=90 border=0 nosave=""></A> <A href="http://linux.vbird.org/adsl"><IMG height=25 src="50_files/icon_adsl[13].gif" width=90 border=0 nosave=""></A> <BR><FONT color=#000066 size=-1>Designed by <A href="mailto:vbird@tsai.adsldns.org">VBird</A> during 2001-2004.&nbsp; Aerosol Lab.</FONT></CENTER></BODY>